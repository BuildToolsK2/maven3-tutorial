# -*- mode: org; coding: utf-8-unix -*-

#+SETUPFILE: ./conf.org
#+TITLE:  Mavenの<scope>

** スコープの種類

あるdependecyが、どのようなときに使用されるか（クラスパスに追加されるか）を
定義したものです。

| スコープ | 説明                                 |
|----------+--------------------------------------|
| compile  | コンパイル時に使用する               |
| test     | テスト時に使用する                   |
| runtime  | 実行時に使用する                     |
| provided | 実行時には、実行環境により提供される |


*** クラスパスが現れる場面

そもそもクラスパスが、どのような場面で現れるかおさらいしましょう。

| シチュエーション             | mvnでの例        |
|------------------------------+------------------|
| コードをコンパイルする       | mvn compile      |
| テストコードをコンパイルする | mvn test-compile |
| アプリを実行する             | mvn jetty:run    |
| テストを実行する             | mvn test         |

** スコープとクラスパスの組み合わせ

上記の組み合わせをマトリックスにすると以下のようになります。

| scope    | javac (src/main) | javac (src/test) | java (src/main) | java (src/test) |
|----------+------------------+------------------+-----------------+-----------------|
| compile  | o                | o                | o               | o               |
| test     | x                | o                | x               | o               |
| runtime  | x                | x                | o               | o               |
| provided | o                | o                | x               | x               |

** 小テスト

適切なスコープとその理由を考えてみよう。


| ライブラリ      | 説明                       | 適切なスコープ | 理由 |
|-----------------+----------------------------+----------------+------|
| junit.jar       | ユニットテスト用ライブラリ |                |      |
| ojdbc6.jar      | JDBCドライバ               |                |      |
| slf4j-api.jar   | ロギングライブラリ         |                |      |
| servlet-api.jar | Servlet API                |                |      |

